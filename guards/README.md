<!-- 🛡️ GUARDRAIL -->
<!--
@what  ガードレールファイルの識別バッジ
@why   AIや人間がガードレールファイルを一瞬で識別できるようにするため
@failure  バッジがないファイルはガードレールとして認識されない
-->

# Guards（ガードレール）

AI駆動開発において、アーキテクチャの崩壊を防ぐための静的検査ツール群。

## 概念

### 横のガードレール（非機能）
コードの構造・依存関係を静的に検査して、アーキテクチャの崩壊を防ぐ。

- アーキテクチャ（依存の向き、責務の境界）
- コーディング規約、デザインシステム準拠

### 縦のガードレール（機能）
テスト実行で機能の正しさを検証する。

- E2Eテスト、UIロジックテスト
- ビジネスロジックテスト

---

## @what / @why / @failure パターン

すべてのガードレール・ルールには以下のコメントを付与する：

```typescript
/**
 * @what 何を検査するか（1行で）
 * @why なぜこの検査が必要か（理由）
 * @failure 違反時にどうなるか（結果）
 */
```

### 目的
これは **AIに意図を伝えるためのコメント** です。

AIがルールを修正するとき、この3つがあると「なぜこのルールがあるのか」を理解した上で作業できます。
逆にこれがないと、AIは「とりあえず通るように」修正してしまい、ルールの意図が骨抜きになります。

---

## 🛡️ ガードレール識別バッジ

**これが最初のガードレールです。**

すべてのガードレールファイルは、冒頭に以下のバッジを付与する：

```html
<!-- 🛡️ GUARDRAIL -->
```

### 目的
- AIや人間がガードレールファイルを**一瞬で識別**できるようにする
- grepやファイル検索で全ガードレールを一覧化できる

### 検索方法
```bash
grep -r "🛡️ GUARDRAIL" guards/
```

---

## ディレクトリ構成

```
guards/
├── README.md           # このファイル
├── architecture/       # 構造の憲法
│   └── layer-boundaries.md
├── code-quality/       # コード品質の憲法（今後）
├── design/             # デザインの憲法（今後）
└── scripts/            # カスタムガードレールスクリプト（今後）
```

---

## 憲法一覧

| 憲法 | Philosophy | 状態 |
|------|------------|------|
| 構造の憲法 | 関心事の分離 | ✅ 文書化済み |
| コード品質の憲法 | 曖昧さの排除 | 🔜 Phase 3 |
| デザインの憲法 | 一貫性とアクセシビリティ | 🔜 Phase 4 |
| 保守の憲法 | ボーイスカウトのルール | 🔜 Phase 5 |
| 速度の憲法 | パフォーマンスは機能の一部 | 🔜 Phase 6 |
| UXの憲法 | 認知負荷の最小化 | 🔜 Phase 7 |
| 価値の憲法 | ユーザーエンゲージメントの最大化 | 🔜 Phase 7 |

---

## 参考資料

- [「横のガードレール」でAIにアーキテクチャを教えるのをやめた話](https://zenn.dev/hideyuki_toyama/articles/horizontal-guard-rails)
- [AIが前提になる時代の、縦と横のガードレール](https://note.com/hideyuki_toyama/n/n24fd932811f5)
